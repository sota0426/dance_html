<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ ã‚ˆã†ã¡ãˆã‚“ã‚¯ã‚¤ã‚ºãŸã„ã‹ã„ ğŸŒŸ</title>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Arial', 'Hiragino Sans', 'Yu Gothic', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        /* ä¸­å¤®å¯„ã›ã‚’ã‚„ã‚ã¦ã€ç”»é¢å…¨ä½“ã‚’ä½¿ã„ã‚„ã™ã */
        justify-content: flex-start; 
        align-items: flex-start;
        padding: 40px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—ã‚„ã™ */
    }

    #app {
        background: white;
        border-radius: 30px;
        padding: 20px;
        /* æœ€å¤§å¹…ã‚’å¤§ããã™ã‚‹ */
        max-width: 1200px; 
        width: 100%;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        margin: auto; /* ä¸­å¤®ã«é…ç½® */
    }

    .screen {
        text-align: center;
    }

    .hidden {
        display: none !important;
    }

    h1 {
        font-size: 3em; /* H1ã‚’å¤§ãã */
        color: #ff6b9d;
        margin-bottom: 25px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    h2 {
        font-size: 2em; /* H2ã‚’å¤§ãã */
        color: #333;
        margin: 30px 0;
    }

    p {
        font-size: 1.4em; /* Pã‚’å¤§ãã */
        color: #555;
        margin: 20px 0;
        line-height: 1.6;
    }

    .cute-button {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        border: none;
        padding: 20px 50px; /* ãƒœã‚¿ãƒ³ã‚’å¤§ãã */
        font-size: 1.6em;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 8px 20px rgba(245, 87, 108, 0.4);
        font-weight: bold;
    }

    .cute-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 25px rgba(245, 87, 108, 0.5);
    }

    .cute-button:active {
        transform: translateY(-1px);
    }

    #header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        font-size: 1.5em; /* ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å¤§ãã */
        color: #666;
        font-weight: bold;
    }

    #options-container {
        display: flex;
        flex-direction: column;
        gap: 20px; /* é–“éš”ã‚’åºƒã’ã‚‹ */
        margin-top: 10px;
    }

    .option-button {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        border: 3px solid #ff6b9d;
        padding: 25px; /* ãƒœã‚¿ãƒ³ã‚’å¤§ãã */
        font-size: 1.8em;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: bold;
        color: #333;
    }

    .option-button:hover:not(:disabled) {
        transform: scale(1.03); /* ãƒ›ãƒãƒ¼æ™‚ã®æ‹¡å¤§ç‡ã‚’å°‘ã—ä¸‹ã’ã‚‹ */
        box-shadow: 0 8px 20px rgba(255, 107, 157, 0.3);
    }

    .option-button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    .image-options-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px; /* é–“éš”ã‚’ã•ã‚‰ã«åºƒã’ã‚‹ */
        margin-top: 40px;
    }

    .image-option {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        border: 4px solid #ff6b9d;
        padding: 20px; 
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s;
        height: 500px; /* é«˜ã•ã‚’å¤§å¹…ã«å¢—ã‚„ã™ */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .image-option:hover:not(.disabled) {
        transform: scale(1.03);
        box-shadow: 0 10px 25px rgba(255, 107, 157, 0.4);
    }

    .image-option.disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    .image-option-emoji {
        max-width: 100%; /* ç”»åƒã‚’ã•ã‚‰ã«å¤§ãã */
        height: 400px; /* é«˜ã•ã‚’å¤§å¹…ã«å¢—ã‚„ã™ */
        object-fit: contain;
        margin-bottom: 20px;
        border-radius: 15px;
    }

    .image-option-text {
        font-size: 2.2em; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’ã•ã‚‰ã«å¤§ãã */
        font-weight: bold;
        color: #333;
    }

    #audio-container {
        margin: 30px 0;
        padding: 30px;
        background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        border-radius: 20px;
        border: 3px solid #ff6b9d;
    }

    #audio-play-button {
        background: linear-gradient(135deg, #ff6b9d 0%, #c471ed 100%);
        color: white;
        border: none;
        padding: 25px 50px; /* ãƒœã‚¿ãƒ³ã‚’å¤§ãã */
        font-size: 2.2em; /* ã‚¢ã‚¤ã‚³ãƒ³ã‚’å¤§ãã */
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 8px 20px rgba(255, 107, 157, 0.4);
        margin: 20px 0;
    }

    #audio-play-button:hover {
        transform: scale(1.05); /* ãƒ›ãƒãƒ¼æ™‚ã®æ‹¡å¤§ç‡ã‚’èª¿æ•´ */
    }

    /* audio-hint ã¯ä½¿ç”¨ã—ãªã„ãŸã‚éè¡¨ç¤º */
    #audio-hint {
        display: none !important; 
    }

    #feedback-popup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }

    #popup-content {
        background: white;
        padding: 50px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¤§ãã */
        border-radius: 30px;
        text-align: center;
        max-width: 500px; /* ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’å¤§ãã */
        animation: popup 0.3s ease-out;
    }

    @keyframes popup {
        from {
            transform: scale(0.7);
            opacity: 0;
        }
        to {
            transform: scale(1);
            opacity: 1;
        }
    }

    #popup-message {
        font-size: 2.5em; /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤§ãã */
        margin-bottom: 25px;
        color: #ff6b9d;
    }

    #correct-answer-text {
        font-size: 1.5em; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤§ãã */
        color: #666;
        margin-bottom: 30px;
    }

    #final-score-text {
        font-size: 1.8em; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤§ãã */
        line-height: 1.8;
        margin: 30px 0;
    }
</style>
</head>
<body>
<div id="app">
        <div id="start-screen" class="screen">
            <h1>ã‚ˆã†ã¡ãˆã‚“ ã‚¯ã‚¤ã‚ºãŸã„ã‹ã„ï¼</h1>
            <p>ãœã‚“ã¶ã§10ã‚‚ã‚“ã‚ã‚‹ã‚ˆï¼ãŒã‚“ã°ã£ã¦ã­ï¼</p>
            <button id="start-button" class="cute-button">âœ¨ ã‚¯ã‚¤ã‚ºã‚’ã¯ã˜ã‚ã‚‹ âœ¨</button>
        </div>

        <div id="quiz-screen" class="screen hidden">
            <div id="header">
                <span id="question-number">ã‚‚ã‚“ã ã„ 1 / 10</span>
                <span id="score">ã›ã„ã‹ã„: 0ã“</span>
            </div>
            
            <h2 id="question-text">ã“ã“ã«å•é¡ŒãŒã¯ã„ã‚Šã¾ã™</h2>
            
            <div id="quiz-content">
                <div id="video-container" class="hidden" style="margin: 30px 0; padding: 30px; background: #fff3e0; border-radius: 20px; border: 3px solid #ff6b9d;">
                    <video id="quiz-video" controls style="width: 100%; max-height: 400px; border-radius: 15px; margin-bottom: 20px;"></video>
                    <p id="video-description" style="font-size: 1.5em; color: #666;"></p>
                </div>
            </div>
        </div>

        <div id="result-screen" class="screen hidden">
            <h1>ğŸŒ¸ ãŠã—ã¾ã„ï¼ ğŸŒ¸</h1>
            <p id="final-score-text"></p>
            <button id="restart-button" class="cute-button">ã‚‚ã†ã„ã¡ã© ã‚ãã¶ï¼</button>
        </div>
    </div>
    
    <div id="feedback-popup" class="hidden">
        <div id="popup-content">
            <h2 id="popup-message"></h2>
            <p id="correct-answer-text"></p>
            <button id="next-button" class="cute-button">ã¤ãã¸</button>
        </div>
    </div>

<div id="feedback-popup" class="hidden">
    <div id="popup-content">
        <h2 id="popup-message"></h2>
        <p id="correct-answer-text"></p>
        <button id="next-button" class="cute-button">ã¤ãã¸</button>
    </div>
</div>

<script>
    // å•é¡Œãƒ‡ãƒ¼ã‚¿ï¼ˆ3ç¨®é¡ã®ç”»é¢ã‚¿ã‚¤ãƒ—ï¼‰
    // NOTE: 'audioSrc'ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¯ã€å®Ÿéš›ã«MP3ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
    const quizData = [
{
            id: 1,
            type: 'text',
            question: "ãŠç©ºã§é›¨ã‚’é™ã‚‰ã›ã‚‹ã®ã¯ï¼Ÿ",
            options: ["â˜ï¸ ãã‚‚", "ğŸˆ ãµã†ã›ã‚“"],
            answer: "â˜ï¸ ãã‚‚",
        },
        {
            id: 2,
            type: 'image',
            question: "ãƒŸãƒƒã‚­ãƒ¼ã®ãŠã¨ã‚‚ã ã¡ã¯ã©ã£ã¡ï¼Ÿ",
            // NOTE: ä»®ã®ç”»åƒãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¿…è¦ã§ã™ã€‚
            options: [
                {  text:"ï¼‘ã°ã‚“", image: "assets/image/mini-a.png" },
                {  text:"ï¼’ã°ã‚“",image: "assets/image/mini-b.jpg" }
            ],
            answer: "ï¼‘ã°ã‚“",
        },
        {
            id: 3,
            type: 'video', // â˜… æ–°ã—ã„å‹•ç”»ã‚¿ã‚¤ãƒ—
            question: "ã¿ã‚“ãªã¯ãŠã©ã‚Œã‚‹ã‹ãªï¼Ÿ",
            videoSrc: "assets/movie/DanceHall.mp4", // â˜… MP4ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’è¿½åŠ  (è¦è¨­ç½®)
            options: ["ã§ããŸ"],
            answer: "ã§ããŸ",
        },
        // {
        //     id: 4,
        //     type: 'text',
        //     question: "ãŠç©ºã§é›¨ã‚’é™ã‚‰ã›ã‚‹ã®ã¯ï¼Ÿ",
        //     options: ["â˜ï¸ ãã‚‚", "ğŸˆ ãµã†ã›ã‚“"],
        //     answer: "â˜ï¸ ãã‚‚",
        // },
        // {
        //     id: 5,
        //     type: 'video', // â˜… æ–°ã—ã„å‹•ç”»ã‚¿ã‚¤ãƒ—
        //     question: "ã¿ã‚“ãªã¯ãŠã©ã‚Œã‚‹ã‹ãªï¼Ÿ",
        //     videoSrc: "assets/movie/DanceHall.mp4", // â˜… MP4ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’è¿½åŠ  (è¦è¨­ç½®)
        //     options: ["ãŠã©ã‚ŒãŸï¼"],
        //     answer: "ãŠã©ã‚ŒãŸï¼",
        // },
        // {
        //     id: 6,
        //     type: 'audio',
        //     question: "ã“ã®éŸ³ã¯ãªã‚“ã®å‹•ç‰©ï¼Ÿ",
        //     audioDescription: "ğŸ”Š ãŠã¨ã‚’ ãã„ã¦ã­",
        //     options: ["ğŸ® ã†ã—", "ğŸ· ã¶ãŸ"],
        //     answer: "ğŸ® ã†ã—",
        //     audioSrc: "assets/cow_moo.mp3", // â˜… MP3ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’è¿½åŠ 
        // },
        // {
        //     id: 7,
        //     type: 'text',
        //     question: "äº¤é€šãƒ«ãƒ¼ãƒ«ã§æ­¢ã¾ã‚Œã®è‰²ã¯ï¼Ÿ",
        //     options: ["ğŸ”µ ã‚ãŠ", "ğŸ”´ ã‚ã‹"],
        //     answer: "ğŸ”´ ã‚ã‹",
        // },
        // {
        //     id: 8,
        //     type: 'image',
        //     question: "èµ¤ãã¦ä¸¸ã„æœç‰©ã¯ï¼Ÿ",
        //     options: [
        //         { text: "ã‚Šã‚“ã”", image: "https://via.placeholder.com/200/FF6B6B/000000?text=APPLE" },
        //         { text: "ãƒãƒŠãƒŠ", image: "https://via.placeholder.com/200/FFE66D/000000?text=BANANA" }
        //     ],
        //     answer: "ã‚Šã‚“ã”",
        // },
        // {
        //     id: 9,
        //     type: 'text',
        //     question: "ãŠå£ã«å…¥ã‚Œã‚‹ã¨ç”˜ã„ã‚‚ã®ã¯ï¼Ÿ",
        //     options: ["ğŸ§‚ ã—ãŠ", "ğŸ¬ ãŠã•ã¨ã†"],
        //     answer: "ğŸ¬ ãŠã•ã¨ã†",
        // },
        // {
        //     id: 10,
        //     type: 'video', // â˜… æ–°ã—ã„å‹•ç”»ã‚¿ã‚¤ãƒ—
        //     question: "ã¿ã‚“ãªã¯ãŠã©ã‚Œã‚‹ã‹ãªï¼Ÿ",
        //     videoSrc: "assets/movie/DanceHall.mp4", // â˜… MP4ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’è¿½åŠ  (è¦è¨­ç½®)
        //     options: ["ãã‚‹ã¾", "ã§ã‚“ã—ã‚ƒ"],
        //     answer: "ãã‚‹ã¾",
        // },
    ];
let currentQuestionIndex = 0;
    let score = 0;
    let audioPlayed = false;
    let videoPlayed = false; // â˜… å‹•ç”»å†ç”Ÿãƒ•ãƒ©ã‚°ã‚’è¿½åŠ 
    let currentAudio = null; 
    let currentVideo = null; // â˜… å‹•ç”»è¦ç´ ã‚’ä¿æŒ

    const startScreen = document.getElementById('start-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultScreen = document.getElementById('result-screen');
    const startButton = document.getElementById('start-button');
    const restartButton = document.getElementById('restart-button');
    const questionNumberSpan = document.getElementById('question-number');
    const scoreSpan = document.getElementById('score');
    const questionText = document.getElementById('question-text');
    const quizContent = document.getElementById('quiz-content');
    const finalScoreText = document.getElementById('final-score-text');
    const feedbackPopup = document.getElementById('feedback-popup');
    const popupMessage = document.getElementById('popup-message');
    const correctAnswerText = document.getElementById('correct-answer-text');
    const nextButton = document.getElementById('next-button');

    // å‹•ç”»é–¢é€£è¦ç´ 
    const videoContainer = document.getElementById('video-container');
    const quizVideo = document.getElementById('quiz-video');
    const videoDescription = document.getElementById('video-description');


    function renderQuestion() {
        if (currentQuestionIndex >= quizData.length) {
            showResultScreen();
            return;
        }

        // å‰ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚’åœæ­¢
        if (currentAudio) {
            currentAudio.pause();
            currentAudio = null;
        }
        // å‰ã®å‹•ç”»ã‚’åœæ­¢
        if (currentVideo) {
            currentVideo.pause();
            currentVideo.classList.add('hidden'); // å‹•ç”»ã‚³ãƒ³ãƒ†ãƒŠã‚‚éè¡¨ç¤ºã«ã™ã‚‹
            videoContainer.classList.add('hidden');
            currentVideo.src = ""; // ã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒªã‚¢ã—ã¦ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾
            currentVideo = null;
        }


        const currentQuiz = quizData[currentQuestionIndex];
        audioPlayed = false;
        videoPlayed = false; // â˜… å‹•ç”»å†ç”Ÿãƒ•ãƒ©ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ

        questionNumberSpan.textContent = `ã‚‚ã‚“ã ã„ ${currentQuestionIndex + 1} / ${quizData.length}`;
        scoreSpan.textContent = `ã›ã„ã‹ã„: ${score}ã“`;
        questionText.textContent = currentQuiz.question;

        quizContent.innerHTML = ''; // quiz-contentã‚’ã‚¯ãƒªã‚¢ã™ã‚‹å‰ã«video-containerã‚’å†é…ç½®
        quizContent.appendChild(videoContainer); // video-containerã‚’å¸¸ã«quiz-contentå†…ã«ä¿æŒ

        // å„ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        if (currentQuiz.type === 'text') {
            renderTextOptions(currentQuiz);
        } else if (currentQuiz.type === 'image') {
            renderImageOptions(currentQuiz);
        } else if (currentQuiz.type === 'audio') {
            renderAudioOptions(currentQuiz);
        } else if (currentQuiz.type === 'video') { // â˜… å‹•ç”»ã‚¿ã‚¤ãƒ—ã‚’è¿½åŠ 
            renderVideoOptions(currentQuiz);
        }
    }

    function renderTextOptions(quiz) {
        const container = document.createElement('div');
        container.id = 'options-container';
        
        quiz.options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option;
            button.className = 'option-button';
            button.addEventListener('click', () => handleAnswer(option, quiz.answer));
            container.appendChild(button);
        });
        
        quizContent.appendChild(container);
    }

    function renderImageOptions(quiz) {
        const container = document.createElement('div');
        container.className = 'image-options-container';
        
        quiz.options.forEach(option => {
            const div = document.createElement('div');
            div.className = 'image-option';
            
            const img = document.createElement('img');
            img.src = option.image.startsWith('assets/') ? 
                      option.image : 
                      'https://via.placeholder.com/200/AAAAAA/FFFFFF?text=NO+IMAGE'; 
            img.alt = option.text;
            img.className = 'image-option-emoji';
            
            const textDiv = document.createElement('div');
            textDiv.className = 'image-option-text';
            textDiv.textContent = option.text;
            
            div.appendChild(img);
            div.appendChild(textDiv);
            
            div.addEventListener('click', () => {
                if (!div.classList.contains('disabled')) {
                    handleAnswer(option.text, quiz.answer);
                }
            });
            container.appendChild(div);
        });
        
        quizContent.appendChild(container);
    }

    function renderAudioOptions(quiz) {
        const audioContainer = document.createElement('div');
        audioContainer.id = 'audio-container';
        audioContainer.innerHTML = `
            <p style="font-size: 1.5em; margin-bottom: 10px;">${quiz.audioDescription}</p>
            <button id="audio-play-button">â–¶ï¸ ãŠã¨ã‚’ ãã</button>
            <div id="audio-hint" style="display: none;"></div>
        `;
        
        const playButton = audioContainer.querySelector('#audio-play-button');
        
        currentAudio = new Audio(quiz.audioSrc);

        playButton.addEventListener('click', () => {
            currentAudio.currentTime = 0;
            currentAudio.play().then(() => {
                playButton.textContent = 'ğŸ”Š ã‚‚ã†ã„ã¡ã© ãã';
                audioPlayed = true;
            }).catch(error => {
                alert('ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
                console.error("Audio playback error:", error);
            });
        });
        
        quizContent.appendChild(audioContainer);

        const optionsContainer = document.createElement('div');
        optionsContainer.id = 'options-container';
        
        quiz.options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option;
            button.className = 'option-button';
            button.addEventListener('click', () => {
                handleAnswer(option, quiz.answer);
            });
            optionsContainer.appendChild(button);
        });
        
        quizContent.appendChild(optionsContainer);
    }

    // â˜… å‹•ç”»å•é¡Œã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹æ–°ã—ã„é–¢æ•°
    function renderVideoOptions(quiz) {
        videoContainer.classList.remove('hidden'); // å‹•ç”»ã‚³ãƒ³ãƒ†ãƒŠã‚’è¡¨ç¤º
        currentVideo = quizVideo; // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ç¾åœ¨ã®å‹•ç”»è¦ç´ ã‚’è¨­å®š
        currentVideo.src = quiz.videoSrc; // å‹•ç”»ã‚½ãƒ¼ã‚¹ã‚’è¨­å®š
        videoDescription.textContent = quiz.videoDescription; // èª¬æ˜ã‚’è¨­å®š

        // å‹•ç”»ãŒå†ç”Ÿã•ã‚ŒãŸã¨ãã«ãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã‚‹
        currentVideo.onplay = () => {
            videoPlayed = true;
        };

        const optionsContainer = document.createElement('div');
        optionsContainer.id = 'options-container';
        
        quiz.options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option;
            button.className = 'option-button';
            button.addEventListener('click', () => {
                // å‹•ç”»ã‚’å†ç”Ÿã—ã¦ã„ãªãã¦ã‚‚è§£ç­”ã¯ã§ãã‚‹ã‚ˆã†ã«å¤‰æ›´
                handleAnswer(option, quiz.answer);
            });
            optionsContainer.appendChild(button);
        });
        
        quizContent.appendChild(optionsContainer);
    }

    function handleAnswer(selectedOption, correctAnswer) {
        const isCorrect = selectedOption.includes(correctAnswer) || 
                         selectedOption === correctAnswer;

        // éŸ³å£°å•é¡Œã‚’è§£ç­”ã—ãŸã¨ãã«ã€å†ç”Ÿä¸­ã®éŸ³å£°ãŒã‚ã‚Œã°åœæ­¢ã™ã‚‹
        if (currentAudio) {
            currentAudio.pause();
            currentAudio = null;
        }
        // å‹•ç”»å•é¡Œã‚’è§£ç­”ã—ãŸã¨ãã«ã€å†ç”Ÿä¸­ã®å‹•ç”»ãŒã‚ã‚Œã°åœæ­¢ã™ã‚‹
        if (currentVideo) {
            currentVideo.pause();
            currentVideo.classList.add('hidden');
            videoContainer.classList.add('hidden');
            currentVideo.src = ""; // ã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒªã‚¢
            currentVideo = null;
        }

        document.querySelectorAll('.option-button').forEach(button => {
            button.disabled = true;
        });
        
        document.querySelectorAll('.image-option').forEach(div => {
            div.classList.add('disabled');
        });
        
        const playButton = document.getElementById('audio-play-button');
        if (playButton) {
            playButton.disabled = true;
        }


        if (isCorrect) {
            score++;
            popupMessage.textContent = "ã‚„ã£ãŸã­ï¼ã›ã„ã‹ã„ï¼ğŸŒŸ";
            correctAnswerText.textContent = "";
        } else {
            popupMessage.textContent = "ã–ã‚“ã­ã‚“â€¦ã¡ãŒã†ã‚ˆï¼ğŸ˜”";
            correctAnswerText.textContent = `ã›ã„ã‹ã„ã¯ã€Œ${correctAnswer}ã€ã ã‚ˆã€‚`;
        }

        scoreSpan.textContent = `ã›ã„ã‹ã„: ${score}ã“`;
        feedbackPopup.classList.remove('hidden');
    }

    function moveToNext() {
        feedbackPopup.classList.add('hidden');
        currentQuestionIndex++;
        renderQuestion();
    }

    function startQuiz() {
        startScreen.classList.add('hidden');
        resultScreen.classList.add('hidden');
        quizScreen.classList.remove('hidden');
        currentQuestionIndex = 0;
        score = 0;
        renderQuestion();
    }

    function showResultScreen() {
        quizScreen.classList.add('hidden');
        resultScreen.classList.remove('hidden');
        finalScoreText.innerHTML = `ãœã‚“ã¶ã§ <strong>${quizData.length}ã‚‚ã‚“</strong> ã®ã†ã¡ã€<br><strong>${score}ã“</strong> ã›ã„ã‹ã„ã—ãŸã‚ˆï¼<br>ã™ã”ã„ã­ï¼âœ¨`;
    }

    startButton.addEventListener('click', startQuiz);
    restartButton.addEventListener('click', startQuiz);
    nextButton.addEventListener('click', moveToNext);

    document.addEventListener('DOMContentLoaded', () => {
        startScreen.classList.remove('hidden');
        quizScreen.classList.add('hidden');
        resultScreen.classList.add('hidden');
        feedbackPopup.classList.add('hidden');

        // quiz-contentã«video-containerã‚’åˆæœŸçŠ¶æ…‹ã§é…ç½®ã—ã¦ãŠã
        // ã“ã‚Œã«ã‚ˆã‚Šã€quizContent.innerHTML = ''; ã§æ¶ˆå»ã•ã‚Œãšã«æ¸ˆã‚€
        document.getElementById('quiz-content').appendChild(videoContainer);
        videoContainer.classList.add('hidden'); // æœ€åˆã¯éè¡¨ç¤º
    });
</script>


</body>
</html>